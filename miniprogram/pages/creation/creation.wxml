<!-- pages/creation/creation.wxml -->
<view class="container">
  <!-- 顶部个人信息条 -->
  <view class="personal-info-bar">
    <image class="avatar" src="/images/avatar_placeholder.png"></image>
    <view class="user-garden-info">
      <text class="garden-name">小明的小花园</text>
      <text class="gua-stats">已解锁卦象: {{unlockedGuaCount}} / 64 | 摇卦次数: {{shakeCount}}</text>
    </view>
  </view>

  <!-- 花园主视图 -->
  <view class="garden-view">
    <!-- 智慧植物区域 -->
    <block wx:for="{{gardenPlants}}" wx:key="id">
      <view class="plant-spot {{item.isUnlocked ? 'unlocked' : 'locked'}}" bindtap="onPlantTap" data-plant-id="{{item.id}}">
        <image wx:if="{{item.isUnlocked}}" class="plant-image" src="{{item.image}}"></image>
        <text wx:else class="locked-hint">?</text>
        <text wx:if="{{!item.isUnlocked}}" class="locked-text">学更多卦来解锁哦</text>
      </view>
    </block>
  </view>

  <!-- 侧边/底部工具栏 -->
  <view class="toolbar">
    <view class="toolbar-item" bindtap="showAchievements">
      <image class="toolbar-icon" src="/images/icon_achievement.png"></image>
      <text class="toolbar-text">成就徽章</text>
    </view>
    <view class="toolbar-item" bindtap="showSettings">
      <image class="toolbar-icon" src="/images/icon_settings.png"></image>
      <text class="toolbar-text">设置</text>
    </view>
    <view class="toolbar-item" bindtap="dailySignIn">
      <image class="toolbar-icon" src="/images/icon_signin.png"></image>
      <text class="toolbar-text">每日签到</text>
    </view>
  </view>

  <!-- 卦象回顾卡片 (弹窗) -->
  <view wx:if="{{showReviewCard}}" class="review-card-overlay" bindtap="hideReviewCard">
    <view class="review-card" catchtap="doNothing">
      <text class="review-card-title">{{currentReviewGua.name}}</text>
      <text class="review-card-explanation">{{currentReviewGua.explanation}}</text>
      <text class="review-card-date">获得日期: {{currentReviewGua.acquisitionDate}}</text>
      <button class="close-button" bindtap="hideReviewCard">关闭</button>
    </view>
  </view>
</view>
